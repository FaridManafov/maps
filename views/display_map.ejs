<% include ./partials/header %>

<div class="page-header">
  <h2>
    <%= map.name %>
    <small class="created-by">created by <%= map.createdByUsername %></small>
  </h2>
</div>

<container class="mapAndMapInfo">
  <!-- Creating a new map with one draggable pin that defaults to showing Toronto. -->
  <div id="map"></div>
  <!-- List of markers that user has created on this map. -->
  <div class="listOfMarkers">
    <h2>Locations</h2>
    <ul id="displayMapMarkers" class="list-group"></ul>
  </div>

  <!-- target markers-hidden with jquery and parse the json -->
  <div class="markers-hidden">
    <%= JSON.stringify(map.markers) %>
  </div>
</container>
<% if (user.loggedIn === true) { %>
<!-- SAVE BUTTON THAT SHOULD EDIT EXISTING ENTRIES IN DATABASE  -->
<form class="save-and-favorite-forms" id="edited-map-submssion" method="PUT" action="/maps" >
  <input id="save" class="btn btn-primary btn-md" type="submit" value="Save">
</form>
<!-- FAVORITE BUTTON THAT SHOULD POST TO USERS TABLE IN DATABASE -->
<form class="save-and-favorite-forms" id="favorite-map-submssion" method="POST" action="/favorites" >
  <input id="favorite" class="btn btn-primary btn-md" type="submit" value="Favorite">
</form>
<% } %>
<% include ./partials/footer %>

<!-- EDITABLE MAP -->
<!-- <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBB8Rzd9fg-Ef8JwpUWcyz9jCdXRSqJWCM&callback=initMap">
</script> -->
<!-- UN-EDITABLE MAP -->
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBB8Rzd9fg-Ef8JwpUWcyz9jCdXRSqJWCM&callback=initDisplayMap">
</script>
  <script type="text/javascript" src="/scripts/display-map.js"></script>
</body>
</html>
